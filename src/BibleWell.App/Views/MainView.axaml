<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:BibleWell.App.ViewModels"
    xmlns:conv="clr-namespace:BibleWell.App.Converters"
    mc:Ignorable="d"
    d:DesignWidth="540"
    d:DesignHeight="960"
    d:DataContext="{x:Static vm:DesignData.DesignMainViewModel}"
    x:Class="BibleWell.App.Views.MainView"
    x:DataType="vm:MainViewModel">

    <Grid RowDefinitions="*, Auto">

        <!-- Page Content -->
        <Border Grid.Row="0">
            <ScrollViewer>
                <TransitioningContentControl Name="CurrentControl" Content="{Binding CurrentPage}" Padding="15" />
            </ScrollViewer>
        </Border>

        <!-- Bottom Navigation -->
        <Border Grid.Row="1">
            <Border.Effect>
                <DropShadowEffect
                    Color="{DynamicResource Bw-DropShadowEffectColor}"
                    BlurRadius="8"
                    Opacity="0.2" />

            </Border.Effect>

            <ListBox
                Name="MenuItemsListBox"
                ItemsSource="{Binding MenuItems}"
                SelectedItem="{Binding SelectedMenuItem}"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Center"
                Background="{DynamicResource Bw-Transparent}"
                BorderThickness="0"
                SelectionMode="Single"
                Padding="10"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Rows="1" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.Styles>
                    <Style Selector="ListBoxItem">
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                        <Setter Property="VerticalContentAlignment" Value="Center" />
                        <Setter Property="Background" Value="{DynamicResource Bw-Transparent}" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Focusable" Value="False" />
                    </Style>
                    <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                        <Setter Property="Background" Value="{DynamicResource Bw-Transparent}" />
                    </Style>
                    <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                        <Setter Property="Background" Value="{DynamicResource Bw-Transparent}" />
                    </Style>
                    <Style Selector="ListBoxItem:pressed /template/ ContentPresenter">
                        <Setter Property="Background" Value="{DynamicResource Bw-Transparent}" />
                    </Style>
                </ListBox.Styles>

                <ListBox.ItemTemplate>
                    <DataTemplate DataType="vm:MenuItemTemplate">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center"
                                    Background="{DynamicResource Bw-Transparent}"
                                    VerticalAlignment="Stretch">
                            <PathIcon Width="24" Height="24"
                                      Data="{Binding IconName, Converter={x:Static conv:FuncValueConverters.StringToIconConverter}}">
                                <PathIcon.Styles>
                                    <Style Selector="PathIcon">
                                        <Setter Property="Foreground" Value="{DynamicResource Bw-IconInactiveBrush}" />
                                    </Style>
                                    <Style Selector="ListBoxItem:selected PathIcon">
                                        <Setter Property="Foreground" Value="{DynamicResource Bw-IconActiveBrush}" />
                                    </Style>
                                </PathIcon.Styles>
                            </PathIcon>

                            <TextBlock Text="{Binding Label}" FontSize="12" HorizontalAlignment="Center"
                                       TextTrimming="CharacterEllipsis">
                                <TextBlock.Styles>
                                    <Style Selector="ListBoxItem:selected TextBlock">
                                        <Setter Property="Foreground" Value="{DynamicResource Bw-IconActiveBrush}" />
                                    </Style>
                                </TextBlock.Styles>
                            </TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>
    </Grid>
</UserControl>